#!/usr/bin/python

import time, psutil, subprocess

def bytes_to_gb(value):
    return round(value/1024/1024/1024, 2)

def bytes_to_mb(value):
    return round(value/1024/1024, 2)

def humanize(bytes):
    bytes_str = str(bytes)
    if len(bytes_str) < 10:
        return str(bytes_to_mb(bytes))
    else:
        return bytes_to_gb(bytes)

while True:
    mem = psutil.virtual_memory()
    used = humanize(mem[3])
    free = humanize(mem[1])
    t = time.strftime('%I:%M:%S')
    status = '# Ram: free: ' + str(free) + 'GB used: ' + str(used) + 'GB # ' + t + ' #'
    subprocess.call(['xsetroot', '-name', status])
    time.sleep(1)
